<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>

    <div th:if="${message}" style="color: green; font-weight: bold; margin-bottom: 15px;">
        [[${message}]]
    </div>

    <!-- Hiển thị thông báo lỗi -->
    <div th:if="${error}" style="color: red; font-weight: bold; margin-bottom: 15px;">
        [[${error}]]
    </div>
    <meta charset="UTF-8">
    <title>Chi tiết đơn hàng</title>
</head>
<body>
<h2>Chi tiết đơn hàng</h2>

<p>ID: <span th:text="${order.getId()}"></span></p>
<p>Ngày đặt: <span th:text="${order.getOrderDate()}"></span></p>
<p>Ngày sử dụng: <span th:text="${order.getStartDate()}"></span></p>
<p>Ngày kết thúc: <span th:text="${order.getEndDate()}"></span></p>
<p>Tổng tiền: <span th:text="${order.getTotalAmount()} + ' VND'"></span></p>
<p>Trạng thái: <span th:text="${order.getStatus()}"></span></p>
<p>Khách hàng: <span th:text="${order.customer.fullname}"></span></p>
<form th:action="@{'/SWP/orders/' + ${order.id} + '/approve'}" method="post" style="display:inline;">
    <button type="submit" style="background-color: #4CAF50; color: white; padding: 10px;">✔ Approve</button>
</form>
<form method="post" th:action="@{/SWP/orders/{id}/reject(id=${order.id})}" style="display: inline;">
    <button type="submit" style="background-color: #f44336; color: white; padding: 10px;">✖ Reject</button>
</form>

<<<<<<< Updated upstream
<a href="/SWP/orders">Quay lại danh sách</a>
=======
        <!-- Khối thông tin đơn hàng -->
        <div class="info-section">
            <h2 class="order-title">Chi tiết order</h2>

            <div class="status-badge" th:class="'status-badge ' + ${order.getStatus().toLowerCase()}">
                <span th:text="${order.getStatus()}">Pending</span>
            </div>

            <div class="info-grid">
                <div class="info-item">
                    <label>Order ID:</label>
                    <span th:text="${order.getId()}">001</span>
                </div>

                <div class="info-item">
                    <label>Ngày đặt thuê:</label>
                    <span th:text="${order.getOrderDate()}">2024-01-15</span>
                </div>

                <div class="info-item">
                    <label>Ngày bắt đầu thuê:</label>
                    <span th:text="${order.getStartDate()}">2024-01-20</span>
                </div>

                <div class="info-item">
                    <label>Ngày kết thúc thuê:</label>
                    <span th:text="${order.getEndDate()}">2024-01-30</span>
                </div>

                <div class="info-item price-item">
                    <label>Tổng tiền:</label>
                    <span class="price" th:text="${order.getTotalAmount()} + ' VND'">500,000 VND</span>
                </div>
            </div>

            <div class="customer-info">
                <label>Thông tin khách hàng:</label>
                <p th:text="${order.customer.fullname}">Nguyễn Văn A</p>
            </div>

            <div class="action-buttons">
                <!-- Nếu status là Pending thì hiện nút approve/reject -->
                <div th:if="${order.getStatus()?.toLowerCase() == 'pending'}">
                    <form th:action="@{'/SWP/orders/' + ${order.id} + '/approve'}" method="post" style="display:inline;">
                        <button type="submit" class="approve-btn">
                            ✓ Phê duyệt
                        </button>
                    </form>
                    <form method="post" th:action="@{/SWP/orders/{id}/reject(id=${order.id})}" style="display: inline;">
                        <button type="submit" class="reject-btn">
                            ✗ Từ chối
                        </button>
                    </form>
                </div>
                <!-- Nếu status là Rejected thì hiện thông báo -->
                <div th:if="${order.getStatus()?.toLowerCase() == 'rejected'}" style="font-weight:600;color:#c82333;padding:12px 0;">
                    Order này đã bị từ chối
                </div>
                <!-- Nếu status là Paid thì hiện thông báo -->
                <div th:if="${order.getStatus()?.toLowerCase() == 'paid'}" style="font-weight:600;color:#20c997;padding:12px 0;">
                    Order này đã được thanh toán
                </div>
                <!-- Nếu status là Approved thì hiện thông báo cần thanh toán -->
                <div th:if="${order.getStatus()?.toLowerCase() == 'approved'}" style="font-weight:600;color:#007bff;padding:12px 0;">
                    Order này cần được thanh toán
                </div>

                <!-- Nút quay lại danh sách xuống dòng riêng -->
                <div style="width:100%;margin-top:20px;">
                    <a href="/SWP/orders" class="back-btn">
                        Quay lại danh sách
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
>>>>>>> Stashed changes
</body>
</html>
