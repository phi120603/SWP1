<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Chi ti·∫øt kho</title>
    <link rel="stylesheet" th:href="@{/css/storage-detail.css}" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<!-- Navigation Bar -->
<nav class="navbar">
    <div class="navbar-content">
        <div class="navbar-brand">
            <a th:href="@{/homepage}">
                <img src="https://res.cloudinary.com/dpkxslork/image/upload/v1750066568/logoooooooo_j1ynjc.png"
                     alt="QVL Storage Logo" class="navbar-logo" />
            </a>
        </div>
        <ul class="navbar-nav">
            <li><a th:href="@{/homepage}">Trang ch·ªß</a></li>
            <li><a th:href="@{/SWP/storages}" class="active">Danh s√°ch</a></li>
        </ul>
    </div>
</nav>

<div class="container">
    <!-- Th√¥ng b√°o chung -->
    <div th:if="${message}" class="alert alert-success">[[${message}]]</div>
    <div th:if="${error}"   class="alert alert-error">[[${error}]]</div>

    <div class="detail-container">
        <!-- Image Gallery -->
        <div class="image-section">
            <div class="main-image-container">
                <img id="mainImage"
                     th:src="${storage.imUrl}"
                     alt="·∫¢nh kho"
                     class="main-image" />
            </div>
            <div class="image-gallery">
                <!-- ·∫¢nh tƒ©nh demo -->
                <img src="https://res.cloudinary.com/dpkxslork/image/upload/v1749656968/sto_3_vd9fdi.png"
                     alt="·∫¢nh 1" class="thumb-image active" onclick="changeMainImage(this)" />
                <img src="https://res.cloudinary.com/dpkxslork/image/upload/v1749656969/sto_2_cu1tng.png"
                     alt="·∫¢nh 2" class="thumb-image" onclick="changeMainImage(this)" />
                <!-- ... -->
            </div>
        </div>

        <!-- Storage Info -->
        <div class="info-section">
            <div class="storage-header">
                <div class="details-header">
                    <h1 class="storage-title" th:text="${storage.storagename}">T√™n kho</h1>
                    <a th:href="@{/SWP/storages}" class="back-btn-nav">‚Üê Quay l·∫°i</a>
                </div>
                <div class="status-rating-container">
                    <div th:class="${storage.status} ? 'status-badge available' : 'status-badge rented'">
                        <span th:text="${storage.status} ? 'C√≤n tr·ªëng' : 'ƒêang thu√™'">C√≤n tr·ªëng</span>
                    </div>
                    <div class="location">
                        üìç <span th:text="${storage.state} + ', ' + ${storage.city}">ƒê·ªãa ƒëi·ªÉm</span>
                    </div>
                </div>
                <div class="price-container">
            <span class="price"
                  th:text="${#numbers.formatDecimal(storage.pricePerDay, 0, 'POINT', 0, 'COMMA')} + ' VNƒê'">
              0 VNƒê
            </span>
                    <span class="price-unit">/ng√†y</span>
                </div>
            </div>

            <div class="info-card">
                <h3>Th√¥ng tin chi ti·∫øt</h3>
                <div class="info-grid">
                    <div>
                        <label>Di·ªán t√≠ch</label>
                        <span th:text="${storage.area} + ' m¬≤'">0 m¬≤</span>
                    </div>
                    <div>
                        <label>M√£ kho</label>
                        <span th:text="${storage.storageid}">0</span>
                    </div>
                    <div>
                        <label>ƒê·ªãa ch·ªâ</label>
                        <p th:text="${storage.address} + ', ' + ${storage.state} + ', ' + ${storage.city}">
                            ƒê·ªãa ch·ªâ ƒë·∫ßy ƒë·ªß
                        </p>
                    </div>
                </div>
            </div>

            <div class="info-card">
                <h3>M√¥ t·∫£</h3>
                <p th:text="${storage.description}">M√¥ t·∫£ kho...</p>
            </div>

            <div class="action-buttons">
                <button type="button" class="booking-btn" onclick="openModal()">
                    ƒê·∫∑t thu√™ ngay
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Booking Date Modal -->
<div id="dateModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-2xl shadow-lg p-6 w-full max-w-md">
        <h2 class="text-xl font-semibold mb-4 text-gray-800">Ch·ªçn ng√†y thu√™</h2>

        <form th:action="@{/SWP/booking/{storageId}/booking(storageId=${storage.storageid})}"
              method="get"
              class="space-y-4">
            <div>
                <label for="startDate" class="block text-sm font-medium text-gray-700">Ng√†y b·∫Øt ƒë·∫ßu</label>
                <input type="date"
                       id="startDate"
                       name="startDate"
                       required
                       class="mt-1 block w-full border rounded-md px-3 py-2"
                       th:value="${#temporals.format(T(java.time.LocalDate).now(), 'yyyy-MM-dd')}" />
            </div>
            <div>
                <label for="endDate" class="block text-sm font-medium text-gray-700">Ng√†y k·∫øt th√∫c</label>
                <input type="date"
                       id="endDate"
                       name="endDate"
                       required
                       class="mt-1 block w-full border rounded-md px-3 py-2"
                       th:value="${#temporals.format(T(java.time.LocalDate).now().plusDays(1), 'yyyy-MM-dd')}" />
            </div>
            <div class="flex justify-end space-x-2 pt-4">
                <button type="button" onclick="closeModal()"
                        class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">
                    H·ªßy
                </button>
                <button type="submit"
                        class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                    Ti·∫øp t·ª•c
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <p>¬© 2025 QVL Storage. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
    </div>
</footer>

<!-- Scripts -->
<script>
    function openModal() { document.getElementById('dateModal').classList.remove('hidden'); }
    function closeModal() { document.getElementById('dateModal').classList.add('hidden'); }
    function changeMainImage(el) {
        const main = document.getElementById('mainImage');
        main.src = el.src;
        document.querySelectorAll('.thumb-image').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
    }
</script>
</body>
</html>
